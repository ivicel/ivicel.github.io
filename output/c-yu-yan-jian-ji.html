
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="./theme/pygments/manni.min.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/font-awesome.min.css">

    <link href="./static/custom.css" rel="stylesheet">



    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113622715-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<meta name="author" content="ivicel" />
<meta name="description" content="First C program #include &lt;stdio.h&gt; int main(int argc, char **argv) { printf(&#34;Hello C!!!\n&#34;); } 1. 注释 /* * * 注释不能嵌套 * */ 2. 关键字、保留字 auto else long switch break enum register typedef case extern union char float short unsigned const for signed void continue goto sizeof volatile default if static while do …" />
<meta name="keywords" content="C">

<meta property="og:site_name" content="Ivicel\s Ambertime"/>
<meta property="og:title" content="C 语言简记"/>
<meta property="og:description" content="First C program #include &lt;stdio.h&gt; int main(int argc, char **argv) { printf(&#34;Hello C!!!\n&#34;); } 1. 注释 /* * * 注释不能嵌套 * */ 2. 关键字、保留字 auto else long switch break enum register typedef case extern union char float short unsigned const for signed void continue goto sizeof volatile default if static while do …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="./c-yu-yan-jian-ji.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-03-20 00:00:00+08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="./author/ivicel.html">
<meta property="article:section" content="C Language"/>
<meta property="article:tag" content="C"/>
<meta property="og:image" content="/images/favicon.ico">

  <title>Ivicel\s Ambertime &ndash; C 语言简记</title>

</head>
<body>
  <aside>
    <div>
      <a href=".">
        <img src="/images/favicon.ico" alt="Ambertime" title="Ambertime">
      </a>
      <h1><a href=".">Ambertime</a></h1>

<p>Make memory in past times</p>

      <ul class="social">
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href=".">Home</a>



    </nav>

<article class="single">
  <header>
      
    <h1 id="c-yu-yan-jian-ji">C 语言简记</h1>
    <p>
      Posted on Mon 20 March 2017 in <a href="./category/c-language.html">C Language</a>

    </p>
  </header>


  <div>
    <p>First C program</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello C!!!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<h4 id="1"><strong>1. 注释</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* </span>
<span class="cm"> *</span>
<span class="cm"> * 注释不能嵌套 </span>
<span class="cm"> *  </span>
<span class="cm"> */</span>
</pre></div>


<h4 id="2"><strong>2. 关键字、保留字</strong></h4>
<table>
<thead>
<tr>
<th><code>auto</code></th>
<th><code>else</code></th>
<th><code>long</code></th>
<th><code>switch</code></th>
<th><code>break</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enum</code></td>
<td><code>register</code></td>
<td><code>typedef</code></td>
<td><code>case</code></td>
<td><code>extern</code></td>
</tr>
<tr>
<td><code>union</code></td>
<td><code>char</code></td>
<td><code>float</code></td>
<td><code>short</code></td>
<td><code>unsigned</code></td>
</tr>
<tr>
<td><code>const</code></td>
<td><code>for</code></td>
<td><code>signed</code></td>
<td><code>void</code></td>
<td><code>continue</code></td>
</tr>
<tr>
<td><code>goto</code></td>
<td><code>sizeof</code></td>
<td><code>volatile</code></td>
<td><code>default</code></td>
<td><code>if</code></td>
</tr>
<tr>
<td><code>static</code></td>
<td><code>while</code></td>
<td><code>do</code></td>
<td><code>struct</code></td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>_Packed</code></td>
<td><code>double</code></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="3"><strong>3. 数据类型</strong></h4>
<p>整型<br />
 - (<code>signed</code>或<code>unsinged</code>)<br />
 - <code>char</code><br />
 - <code>int</code> <br />
 - <code>short</code> <br />
 - <code>long</code>  </p>
<p>浮点型<br />
 - <code>float</code><br />
 - <code>double</code><br />
 - <code>long double</code>  </p>
<p>数据在系统中占据的内存大小，与系统类型有关</p>
<p><img alt="存储大小" src="../images/存储大小.jpg" /></p>
<p><code>void</code>类型</p>
<p>作为函数返回值: <code>void func(int status)</code><br />
作函数参数: <code>int rand(void)</code><br />
作可变指针: <code>void *malloc(size_t size)</code></p>
<h4 id="4"><strong>4. 标识符，变量</strong></h4>
<p>以<code>A-Z</code>或<code>a-z</code>或<code>_</code>开头，加上数字<br />
<code>extern</code>关键字声明而不定义，在别的文件定义该变量</p>
<ol>
<li>在函数或块内部的<strong>局部变量</strong></li>
<li>在所有函数外部的<strong>全局变量</strong></li>
<li>在函数中定义的<strong>形式参数</strong></li>
</ol>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="cm">/* 全局变量 */</span>
<span class="cm">/* 不手动初始化时，默认值被系统初始化为:</span>
<span class="cm"> * int =&gt; 0</span>
<span class="cm"> * char =&gt; &#39;\0&#39;</span>
<span class="cm"> * float =&gt; 0</span>
<span class="cm"> * double =&gt; 0</span>
<span class="cm"> * pointer =&gt; NULL</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* 局部变量 */</span>
    <span class="kt">int</span> <span class="n">b</span><span class="p">;</span>

<span class="p">}</span>
<span class="cm">/* 形式变量 */</span>
<span class="kt">void</span> <span class="nf">func</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* do something */</span>
<span class="p">}</span>
</pre></div>


<h4 id="5"><strong>5. 常量</strong></h4>
<p>整数常量：十进制、十六进制(前缀<code>0x</code>或<code>0X</code>)、八进制(前缀<code>0</code>)，可以带上后缀<code>U</code> <code>u</code>(表示<code>unsigned</code>), <code>L</code> <code>l</code>(表示<code>long</code>)<br />
浮点常量：<code>e</code>或<code>E</code>的指数 <code>1.3</code><br />
字符常量：<code>'x'</code>, <code>'y'</code>, 转义字符<br />
字符串常量：<code>"hello"</code></p>
<p>定义常量：</p>
<div class="highlight"><pre><span></span><span class="cm">/* 1. define预处理器 */</span> 
<span class="cp">#define LENGTH 10</span>
<span class="cm">/* 2. const关键字 */</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">LEN</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>


<h4 id="6-c"><strong>6. C存储类</strong></h4>
<ol>
<li><code>auto</code>: 局部变量默认类型，只能在局部变量使用  </li>
<li><code>register</code>: 存储在寄存器中，不能对其使用<code>&amp;</code>运算符</li>
<li><code>static</code>: 静态变量<br />
- 修饰局部变量时，变量退出函数时不会被销毁<br />
- 修饰全局时该变量只能在当前文件使用</li>
<li><code>extern</code>: 全局变量在所有程序文件可见，对于无法初始化的变量，会把变量名指向一个之前定义过的存储位置。</li>
</ol>
<h4 id="7"><strong>7. 运算符</strong></h4>
<p>算术运算符: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, 前/后缀<code>++</code>, 前/后缀<code>--</code><br />
关系运算符: <code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code><br />
逻辑运算符: <code>&amp;&amp;</code>, <code>||</code>, <code>!</code><br />
位运算符: <code>|</code>, <code>&amp;</code>, <code>^</code>, <code>~</code>(取反), <code>&lt;&lt;</code>(左移), <code>&gt;&gt;</code>(右移)<br />
赋值运算符: <code>=</code>, <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code>, <code>&lt;&lt;=</code>, <code>&gt;&gt;=</code>, <code>&amp;=</code>, <code>|=</code>, <code>|=</code><br />
其他运算符: <code>sizeof</code>, <code>&amp;</code>(返回变量地址), <code>*</code>(指向一个变量), <code>?:</code></p>
<h4 id="8"><strong>8. 语句</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* 判断 */</span>
<span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;yes</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="n">esle</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;no</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/*..*/</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="o">==</span> <span class="n">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/*..*/</span>
<span class="p">}</span>

<span class="k">switch</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
        <span class="cm">/*..*/</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span>
        <span class="cm">/*..*/</span>
<span class="p">}</span>

<span class="cm">/* 循环 */</span>
<span class="k">while</span> <span class="p">(</span><span class="n">a</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* do something */</span>
<span class="p">}</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="cm">/* do something */</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">a</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* do something */</span>
<span class="p">}</span>

<span class="cm">/* continue 语句 */</span>
<span class="cm">/* goto 语句 */</span>
</pre></div>


<h4 id="9"><strong>9. 函数</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* 传值 */</span>
<span class="kt">int</span> <span class="nf">func1</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* do something */</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* 引用 */</span>
<span class="kt">int</span> <span class="nf">func2</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* do something */</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h4 id="10"><strong>10. 数组</strong></h4>
<div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">balance</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>
<span class="kt">char</span> <span class="n">b</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;hello&quot;</span><span class="p">;</span>    <span class="cm">/* 最后一位存储&#39;\0&#39; */</span>
<span class="kt">int</span> <span class="n">c</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span> <span class="cm">/* 忽略数组大小时，数组大小初始化为元素个数 */</span>
<span class="cm">/* 多维数组 */</span>
<span class="kt">int</span> <span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4 id="11"><strong>11. 指针</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* 指针的大小跟系统有关，64位中为8个字节 */</span>
<span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span> <span class="o">*</span><span class="n">p1</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">;</span>    <span class="cm">/* p是a的地址，*p是a的值 */</span>
<span class="kt">int</span> <span class="o">*</span><span class="n">p2</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>  <span class="cm">/* 空指针 */</span>
<span class="cm">/* 指针运算, 其实是内存的运算，指针的类型决定其运算增加或减少几个字节 */</span>
<span class="n">p</span><span class="o">++</span><span class="p">;</span>
<span class="n">p</span><span class="o">--</span><span class="p">;</span>
<span class="n">p1</span> <span class="o">&gt;</span> <span class="n">p2</span><span class="p">;</span>
<span class="cm">/* 指针数组 */</span>
<span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">;</span>
<span class="cm">/* 指向指针的指针 */</span>
<span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">;</span>
<span class="kt">int</span> <span class="o">**</span><span class="n">ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">;</span>
</pre></div>


<h4 id="12"><strong>12. 结构体</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* 定义 */</span>
<span class="k">struct</span> <span class="n">Books</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">title</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">book_id</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* 声明 */</span>
<span class="k">struct</span> <span class="n">Books</span> <span class="n">b1</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">Books</span> <span class="o">*</span><span class="n">book_ptr</span><span class="p">;</span>
<span class="cm">/* 访问 */</span>
<span class="n">b1</span><span class="o">-&gt;</span><span class="n">title</span><span class="p">;</span>
<span class="n">b1</span><span class="o">-&gt;</span><span class="n">book_id</span><span class="p">;</span>
</pre></div>


<h4 id="13"><strong>13. 共用体</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* 大小是占内存最大的成员的大小 */</span>
<span class="k">union</span> <span class="n">Data</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">f</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="p">}</span><span class="n">data</span><span class="p">;</span>
<span class="cm">/* 访问 */</span>
<span class="n">data</span><span class="p">.</span><span class="n">i</span><span class="p">;</span>
<span class="n">data</span><span class="p">.</span><span class="n">f</span><span class="p">;</span>

<span class="cm">/*********************************/</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">union</span> <span class="n">Data</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">j</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">a</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
    <span class="p">}</span><span class="n">data</span><span class="p">;</span>

    <span class="n">data</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">data</span><span class="p">.</span><span class="n">j</span> <span class="o">=</span> <span class="mf">2.3</span><span class="p">;</span>
    <span class="cm">/* 最的出赋值覆盖了前面的值 */</span>
    <span class="n">strcpy</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">a</span><span class="p">,</span> <span class="s">&quot;C Programming&quot;</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;data.i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">i</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;data.j = %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">j</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;data.a = %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">a</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* 输出 */</span>
<span class="n">data</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1917853763</span>
<span class="n">data</span><span class="p">.</span><span class="n">j</span> <span class="o">=</span> <span class="mf">4122360580327794860452759994368.000000</span>
<span class="n">data</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">C</span> <span class="n">Programming</span>

<span class="cm">/**************************************/</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">union</span> <span class="n">Data</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">j</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">a</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
    <span class="p">}</span> <span class="n">data</span><span class="p">;</span>

    <span class="n">data</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;data.i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">i</span><span class="p">);</span>
    <span class="n">data</span><span class="p">.</span><span class="n">j</span> <span class="o">=</span> <span class="mf">2.3</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;data.j = %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">j</span><span class="p">);</span>
    <span class="n">strcpy</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">a</span><span class="p">,</span> <span class="s">&quot;C Programming&quot;</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;data.a = %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">a</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* 输出正常 */</span>
<span class="n">data</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">data</span><span class="p">.</span><span class="n">j</span> <span class="o">=</span> <span class="mf">2.300000</span>
<span class="n">data</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">C</span> <span class="n">Programming</span>
</pre></div>


<h4 id="14"><strong>14. 位域</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* 一个位域必须存储在同一字节中，有些编译器可以跨字节，可以有空域来作占位符 */</span>
<span class="cm">/* 因为不能跨字节，所以位域最大为8位，大于8位产生不可预计影响 */</span>
<span class="cm">/* 无名位域即空域，只能用来作占位符，不能被使用 */</span>

<span class="cm">/* 位域使用struct声明 </span>
<span class="cm"> * struct {</span>
<span class="cm"> *     type [member_name] : width;</span>
<span class="cm"> * };</span>
<span class="cm"> * type可以是有符号或无符号整型，准定了如何解释位域</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="p">{</span>
    <span class="cm">/* 只占4个字节，并且只有两bit被使用 */</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nl">width</span><span class="p">:</span><span class="mi">1</span><span class="p">;</span>       
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nl">length</span><span class="p">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span><span class="n">status</span><span class="p">;</span>

<span class="k">struct</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="nl">a</span><span class="p">:</span><span class="mi">4</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="o">:</span><span class="mi">4</span><span class="p">;</span>    <span class="cm">/* 空域 */</span>
    <span class="n">usigned</span> <span class="nl">b</span><span class="p">:</span><span class="mi">4</span><span class="p">;</span>    <span class="cm">/* 从下一个字节开始存储 */</span>
    <span class="n">usigned</span> <span class="nl">c</span><span class="p">:</span><span class="mi">4</span><span class="p">;</span>
<span class="p">}</span><span class="n">bs</span><span class="p">;</span>
<span class="cm">/* 位域调用，赋值大小应当小于位数能表示的最大数</span>
<span class="cm"> * 超过这个数时编译器会产警告 </span>
<span class="cm"> */</span>
<span class="n">bs</span><span class="p">.</span><span class="n">a</span><span class="p">;</span>
<span class="n">bs</span><span class="o">-&gt;</span><span class="n">b</span><span class="p">;</span>
</pre></div>


<h4 id="15-typedef"><strong>15. typedef</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* typedef 来定义别名 */</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">BYTE</span><span class="p">;</span>
<span class="n">BYTE</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">Books</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">title</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">book_id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Book</span><span class="p">;</span>
<span class="n">Book</span> <span class="n">b1</span><span class="p">;</span>
<span class="cm">/* typedef vs define</span>
<span class="cm"> * typedef 仅限于为类型定义符号名称</span>
<span class="cm"> * #define 不仅可以为类型定义别名，也能为数值定义别名，比如可以定义 1 为 ONE</span>
<span class="cm"> * typedef 是由编译器执行解释的，#define 语句是由预编译器进行处理的</span>
<span class="cm"> */</span>
</pre></div>


<h4 id="16">**16. 标准输入、输出、错误输出</h4>
<p><code>stdin</code> <code>stdout</code> <code>stderr</code>
读或输出字符：<code>getchar()</code> <code>putchar()</code>
读或输出一行：<code>gets()</code> <code>puts()</code>
格式化输入输出：<code>scanf()</code> <code>printf()</code></p>
<div class="highlight"><pre><span></span><span class="cm">/* 文件读写 */</span>
<span class="kt">FILE</span> <span class="o">*</span><span class="nf">fopen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">mode</span><span class="p">);</span>
<span class="cm">/* 模式:</span>
<span class="cm"> * r 只读，文件不存在程序出错</span>
<span class="cm"> * w 只写，文件不存在则创建，存在截为0</span>
<span class="cm"> * a 增加写入，文件不存在则创建</span>
<span class="cm"> * r+ 读写，文件不存在程序出错，存在截为0</span>
<span class="cm"> * w+ 读写，文件不存在则创建，存在截为0</span>
<span class="cm"> * a+ 读写增加，文件不存在则创建</span>
<span class="cm"> * b 二进制模式</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="nf">fputc</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">fputs</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">fgetc</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">);</span>
<span class="kt">char</span> <span class="o">*</span><span class="nf">fgets</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">);</span>

<span class="cm">/* 读写二进制 */</span>
<span class="kt">size_t</span> <span class="nf">fread</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">numbers</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">);</span>
<span class="kt">size_t</span> <span class="nf">fwrite</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">numbers</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">);</span>
</pre></div>


<h4 id="17"><strong>17.预处理器</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> * #define   定义宏</span>
<span class="cm"> * #include  包含一个源代码文件</span>
<span class="cm"> * #ifdef    如果宏已经定义，返回真</span>
<span class="cm"> * #ifndef   如果宏未定义，返回真</span>
<span class="cm"> * #if       如果条件为真，则编译下方代码</span>
<span class="cm"> * #else</span>
<span class="cm"> * #elif</span>
<span class="cm"> * #endif    结束一个#if语句</span>
<span class="cm"> * #error    当遇到标准错误时，输出错误消息</span>
<span class="cm"> * #pragma   使用标准化方法，向编译器发布特殊命令到编译器中</span>
<span class="cm"> */</span>

<span class="cp">#define MAX_ARRAY_LENGTH 20</span>

<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;myheader.h&quot;</span><span class="cp"></span>

<span class="cp">#undef FILE_SIZE</span>
<span class="cp">#define FILE_SIZE 42</span>

<span class="cp">#ifndef MESSAGE</span>
   <span class="cp">#define MESSAGE &quot;You wish&quot;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef DEBUG</span>
    <span class="cm">/* do something */</span>
<span class="cp">#else</span>
    <span class="cm">/* doing... */</span>
<span class="cp">#endif</span>

<span class="cm">/* # 号的使用使用传入宏的变量转为字符串</span>
<span class="cm"> * ## 号使两个参数合并</span>
<span class="cm"> */</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="cp">#define tokenpaster(n) printf (&quot;token&quot; #n &quot; = %d&quot;, token##n)</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">token34</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>

   <span class="n">tokenpaster</span><span class="p">(</span><span class="mi">34</span><span class="p">);</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* 输出 */</span>
<span class="n">token34</span> <span class="o">=</span> <span class="mi">40</span>
</pre></div>


<p>预定义的宏
<code>__DATE__</code> 以"MMM DD YYYY"表示的日期
<code>__TIME__</code> 以"HH:MM:SS"表示的时间
<code>__FILE__</code> 当前文件名
<code>__LINE__</code> 当前行号
<code>__STDC__</code> 当以ANSI标准编译时，定义为1</p>
<h4 id="18"><strong>18. 类型转换</strong></h4>
<p><img alt="强制类型转换" src="../images/强制类型转换.png" /></p>
<h4 id="19"><strong>19. 可变参数</strong></h4>
<div class="highlight"><pre><span></span><span class="cm">/* 可变参数定义在 stdarg.h 头文件中</span>
<span class="cm"> * 函数的第一个参数总是int，表示参数的个数，后面跟省略号</span>
<span class="cm"> * 使用int参数和va_start宏初始化va_list变量为参数列表</span>
<span class="cm"> * 使用va_arg宏和va_list变量来访问参数列表中的每一项</span>
<span class="cm"> * 使用va_end来清理赋予va_list变量的内存</span>
<span class="cm"> */</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdarg.h&gt;</span><span class="cp"></span>


<span class="kt">double</span> <span class="nf">average</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">,</span> <span class="p">...)</span>
<span class="p">{</span>
    <span class="kt">double</span> <span class="n">sum</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
    <span class="kt">va_list</span> <span class="n">valist</span><span class="p">;</span>
    <span class="n">va_start</span><span class="p">(</span><span class="n">valist</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="n">va_arg</span><span class="p">(</span><span class="n">valist</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">va_end</span><span class="p">(</span><span class="n">valist</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">sum</span> <span class="o">/</span> <span class="n">num</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">double</span> <span class="n">i</span> <span class="o">=</span> <span class="n">average</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;average is: %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h4 id="20"><strong>20. 内存管理</strong></h4>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="o">*</span><span class="nf">calloc</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">void</span> <span class="o">*</span><span class="nf">malloc</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">realloc</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">address</span><span class="p">,</span> <span class="kt">int</span> <span class="n">newsize</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">free</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">address</span><span class="p">);</span>
</pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/c.html">C</a>
    </p>
  </div>





</article>

    <footer>
<p>
  &copy;  2018 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Ivicel\s Ambertime ",
  "url" : ".",
  "image": "/images/favicon.ico",
  "description": "ivicel's thoughts and writings"
}
</script>

</body>
</html>